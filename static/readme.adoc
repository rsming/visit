```
        _      _ __             __        __  _     
 _   __(_)____(_) /_      _____/ /_____ _/ /_(_)____
| | / / / ___/ / __/_____/ ___/ __/ __ `/ __/ / ___/
| |/ / (__  ) / /_/_____(__  ) /_/ /_/ / /_/ / /__  
|___/_/____/_/\__/     /____/\__/\__,_/\__/_/\___/  
                                                    
       ¯\_(ツ)_/¯ :: [html / css / bulma]
```

== visit-static ==

Static HTML/CSS page dedicated to the International Hobbit Day (September the 22nd)

=== docker ===

```
docker stop hobbit.visit && docker rm hobbit.visit && docker image rm rsming/visit:1.0
docker build --tag rsming/visit:1.0 .
docker run --name hobbit.visit --detach --publish 8085:80 --publish 8443:443 rsming/visit:1.0
```

http://localhost:8085

```
docker login --username=rsming
docker push rsming/visit:1.0
docker push rsming/visit:latest
```

=== steps to deploy to aws ===

  . create ssl certificate: (see below)
  . create docker image: `docker build --tag rsming/visit:1.0 .`
  . push image to docker hub: `docker push rsming/visit:1.0`
  . create aws cloudformation stack: (see `cloudformation/readme.adoc`)

=== ssl certificate with certbot ===

```
docker run --rm -it \
  --env AWS_ACCESS_KEY_ID=$AWS_ACCESS_KEY_ID \
  --env AWS_SECRET_ACCESS_KEY=$AWS_SECRET_ACCESS_KEY \
  --volume "$PWD/ssh:/etc/letsencrypt" certbot/dns-route53 certonly \
  --dns-route53 \
  -d visit.shrugcoding.click -m "rustam.mingazov@gmail.com" --agree-tos
```

=== ssl (wrong way - self signed certificate) ===

```
keytool -genkey -keyalg RSA -alias visit -keystore ./nginx/ssh/visit.jks -storepass password -keysize 2048 \
  -dname "CN=Bilbo Baggins,OU=Dwarf Company, O=War of the ring, L=Under the hill, ST=Hobbiton, C=ME"
keytool -export -alias visit -keystore nginx/ssh/visit.jks -rfc -file nginx/ssh/visit.X509_certificate.crt
openssl pkcs12 -in nginx/ssh/visit.jks -nodes -nocerts -out nginx/ssh/visit.private.key
```

=== resources ===

  - [Docker Hub] (https://hub.docker.com/repository/docker/rsming/visit)
  - [Bulma] (https://bulma.io/)
  - [Font Awesome] (https://fontawesome.com/)
  - [xip.io] http://xip.io/
